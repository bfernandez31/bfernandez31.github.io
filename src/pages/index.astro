---
import PageLayout from "../layouts/PageLayout.astro";
import HeroTui from "../components/sections/HeroTui.astro";
import AboutReadme from "../components/sections/AboutReadme.astro";
import ExperienceGitLog from "../components/sections/ExperienceGitLog.astro";
import ProjectsTelescope from "../components/sections/ProjectsTelescope.astro";
import ExpertiseCheckhealth from "../components/sections/ExpertiseCheckhealth.astro";
import ContactTerminal from "../components/sections/ContactTerminal.astro";
import { pageMetadata } from "../data/pages";
import type { JSONLDStructuredData } from "../types/seo";

const metadata = pageMetadata.home;

// About section content
const biography = `
I'm a passionate full stack developer with a focus on creating exceptional web experiences.
With expertise in modern JavaScript frameworks, performance optimization, and accessible design,
I build applications that are both beautiful and functional. I believe in writing clean,
maintainable code and continuously learning new technologies to stay at the forefront of web development.
`.trim();

const highlights = [
	"15+ years of experience in web development",
	"Expert in TypeScript, Angular, and Java",
	"Strong advocate for accessibility and performance",
	"Contributed to open-source projects",
	"Passionate about clean code and best practices",
];

// JSON-LD Structured Data for SEO
const jsonLd: JSONLDStructuredData = {
	"@context": "https://schema.org",
	"@type": "WebSite",
	name: "Benoit Fernandez Portfolio",
	url: "https://b-fernandez.github.io/portfolio/",
	description: metadata.description,
	mainEntity: {
		"@type": "Person",
		name: "Benoit Fernandez",
		url: "https://b-fernandez.github.io/portfolio/",
		description:
			"Full Stack Developer & Creative Technologist specializing in modern web technologies",
		image: "https://b-fernandez.github.io/portfolio/images/profile.jpg",
		jobTitle: "Full Stack Developer",
		email: "contact@b-fernandez.com",
		sameAs: [
			"https://github.com/b-fernandez",
			"https://linkedin.com/in/benoit-fernandez",
		],
		knowsAbout: [
			"TypeScript",
			"React",
			"Node.js",
			"Astro",
			"Web Performance",
			"Accessibility (WCAG 2.1)",
			"GSAP Animation",
		],
		hasPart: [
			{
				"@type": "CreativeWork",
				name: "Portfolio Projects",
				description:
					"Collection of web development projects showcasing modern technologies",
				url: "https://b-fernandez.github.io/portfolio/#projects",
			},
		],
	},
	potentialAction: {
		"@type": "Action",
		target: "https://b-fernandez.github.io/portfolio/#contact",
		name: "Contact",
	},
};
---

<PageLayout
	title={metadata.title}
	description={metadata.description}
	ogImage={metadata.ogImage}
>
	<!-- JSON-LD Structured Data -->
	<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} slot="head" />

	<!-- Hero Section -->
	<section
		id="hero"
		data-section="hero"
		class="tui-section tui-section--hero"
		role="main"
		aria-label="Hero section with introduction and call to action"
	>
		<HeroTui
			subheadline="Full Stack Developer & Creative Technologist"
			typingSpeed={12.5}
			ctaText="Explore Projects"
			ctaLink="#projects"
		/>
	</section>

	<!-- About Section (README.md style) -->
	<section
		id="about"
		data-section="about"
		class="tui-section tui-section--about"
		role="region"
		aria-label="About section with background and experience"
	>
		<AboutReadme biography={biography} highlights={highlights} />
	</section>

	<!-- Experience Section (git log style) -->
	<section
		id="experience"
		data-section="experience"
		class="tui-section tui-section--experience"
		role="region"
		aria-label="Experience section with professional career history"
	>
		<ExperienceGitLog />
	</section>

	<!-- Projects Section (Telescope/fzf style) -->
	<section
		id="projects"
		data-section="projects"
		class="tui-section tui-section--projects"
		role="region"
		aria-label="Projects section showcasing portfolio work"
	>
		<ProjectsTelescope />
	</section>

	<!-- Expertise Section (:checkhealth style) -->
	<section
		id="expertise"
		data-section="expertise"
		class="tui-section tui-section--expertise"
		role="region"
		aria-label="Expertise section with technical skills and competencies"
	>
		<ExpertiseCheckhealth />
	</section>

	<!-- Contact Section (terminal style) -->
	<section
		id="contact"
		data-section="contact"
		class="tui-section tui-section--contact"
		role="region"
		aria-label="Contact section for inquiries and collaboration"
	>
		<ContactTerminal />
	</section>
</PageLayout>

<style>
	/* TUI section styling handled by component-scoped styles */
</style>

<script>
	import { initGSAP } from "../scripts/gsap-config";
	import { initKeyboardNavDetection } from "../scripts/accessibility";
	import { initTuiNavigation } from "../scripts/tui-navigation";

	// Progressive enhancement wrapper - ensure navigation always works
	try {
		// Initialize global animations and utilities
		initGSAP();
		initKeyboardNavDetection();

		// Initialize TUI navigation (replaces old single-page navigation)
		initTuiNavigation();
	} catch (error) {
		// Progressive enhancement: Navigation and content remain accessible if animations fail
		console.error('[Index] Failed to initialize TUI navigation:', error);
		console.log('[Index] Site will use native hash navigation');
		// Hash-based navigation still works via native browser behavior
	}
</script>
