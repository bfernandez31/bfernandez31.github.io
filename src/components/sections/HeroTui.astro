---
/**
 * HeroTui Component
 * Feature: PBF-38-ascii-art-for
 *
 * Hero section with ASCII art name and typewriter subheadline
 */

interface Props {
	/** Subheadline text */
	subheadline?: string;
	/** Typing speed (chars/sec) */
	typingSpeed?: number;
	/** CTA button text */
	ctaText?: string;
	/** CTA button link */
	ctaLink?: string;
}

const {
	subheadline,
	typingSpeed = 12.5,
	ctaText = "Explore Projects",
	ctaLink = "#projects",
} = Astro.props;
---

<div class="tui-hero">
  <div class="tui-hero__content">
    <!-- ASCII Art Name (static, no typewriter animation) -->
    <h1 class="tui-hero__headline-wrapper">
      <pre class="tui-hero__ascii" aria-label="Benoit Fernandez">
██████╗ ███████╗███╗   ██╗ ██████╗ ██╗████████╗
██╔══██╗██╔════╝████╗  ██║██╔═══██╗██║╚══██╔══╝
██████╔╝█████╗  ██╔██╗ ██║██║   ██║██║   ██║
██╔══██╗██╔══╝  ██║╚██╗██║██║   ██║██║   ██║
██████╔╝███████╗██║ ╚████║╚██████╔╝██║   ██║
╚═════╝ ╚══════╝╚═╝  ╚═══╝ ╚═════╝ ╚═╝   ╚═╝

███████╗███████╗██████╗ ███╗   ██╗ █████╗ ███╗   ██╗██████╗ ███████╗███████╗
██╔════╝██╔════╝██╔══██╗████╗  ██║██╔══██╗████╗  ██║██╔══██╗██╔════╝╚══███╔╝
█████╗  █████╗  ██████╔╝██╔██╗ ██║███████║██╔██╗ ██║██║  ██║█████╗    ███╔╝
██╔══╝  ██╔══╝  ██╔══██╗██║╚██╗██║██╔══██║██║╚██╗██║██║  ██║██╔══╝   ███╔╝
██║     ███████╗██║  ██║██║ ╚████║██║  ██║██║ ╚████║██████╔╝███████╗███████╗
╚═╝     ╚══════╝╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝  ╚═╝╚═╝  ╚═══╝╚═════╝ ╚══════╝╚══════╝</pre>
    </h1>

    {subheadline && (
      <p
        class="tui-hero__subheadline"
        id="hero-subheadline"
        data-typewriter={subheadline}
        data-typewriter-speed={typingSpeed * 1.5}
        data-typewriter-delay="0.3"
      >
        <span class="typewriter-text">{subheadline}</span>
      </p>
    )}

    {ctaText && ctaLink && (
      <a href={ctaLink} class="tui-hero__cta">
        <span class="tui-hero__cta-icon" aria-hidden="true">$</span>
        {ctaText}
      </a>
    )}
  </div>

</div>

<script>
  import { createTypewriterChain } from '../../scripts/typing-animation';

  // Initialize hero typing animation (subheadline only - ASCII art is static)
  const subheadline = document.getElementById('hero-subheadline');

  if (subheadline) {
    const items = [
      {
        element: subheadline,
        text: subheadline.getAttribute('data-typewriter') || '',
        options: {
          speed: parseFloat(subheadline.getAttribute('data-typewriter-speed') || '18'),
          delay: 0.3,
        },
      },
    ];

    createTypewriterChain(items);
  }
</script>

<style>
  .tui-hero {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    min-height: calc(100vh - 5rem);
    padding: 2rem;
    gap: 2rem;
  }

  .tui-hero__content {
    max-width: 800px;
  }

  /* ASCII Art Name - h1 wrapper for semantic heading */
  .tui-hero__headline-wrapper {
    margin: 0 0 1rem;
  }

  /* ASCII Art Name - styled pre element */
  .tui-hero__ascii {
    font-family: var(--font-mono, monospace);
    font-size: clamp(0.3rem, 0.8vw, 0.5rem);
    line-height: 1.2;
    color: var(--color-primary, #cba6f7);
    margin: 0;
    overflow-x: auto;
    user-select: none;
    -webkit-user-select: none;
  }

  .tui-hero__subheadline {
    font-family: var(--font-mono, monospace);
    font-size: clamp(1rem, 2vw, 1.5rem);
    color: var(--color-text-muted, #a6adc8);
    margin: 0 0 2rem;
    line-height: 1.4;
  }

  .tui-hero__cta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-family: var(--font-mono, monospace);
    font-size: 1rem;
    font-weight: 700;
    color: var(--color-background, #1e1e2e);
    background-color: var(--color-primary, #cba6f7);
    border: none;
    border-radius: 0.25rem;
    text-decoration: none;
    cursor: pointer;
    transition: background-color 0.15s ease, transform 0.15s ease;
  }

  .tui-hero__cta:hover {
    background-color: var(--color-secondary, #f5c2e7);
    transform: translateY(-2px);
  }

  .tui-hero__cta:focus-visible {
    outline: 2px solid var(--color-primary, #cba6f7);
    outline-offset: 2px;
  }

  .tui-hero__cta:active {
    transform: translateY(0);
  }

  .tui-hero__cta-icon {
    color: var(--color-background, #1e1e2e);
    opacity: 0.7;
  }

  /* Typewriter cursor styling */
  :global(.typewriter-cursor) {
    display: inline-block;
    width: 1ch;
    color: var(--color-primary, #cba6f7);
  }

  /* Responsive */
  @media (min-width: 1024px) {
    .tui-hero {
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
    }
  }

  @media (max-width: 767px) {
    .tui-hero {
      padding: 1rem;
      min-height: calc(100vh - 4rem);
    }

    .tui-hero__ascii {
      font-size: 0.3rem;
    }

    .tui-hero__cta {
      width: 100%;
      justify-content: center;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .tui-hero__cta {
      transition: none;
    }

    .tui-hero__cta:hover {
      transform: none;
    }
  }
</style>
